<!DOCTYPE html>
<html lang="en" xmlns:sec="http://www.w3.org/1999/xhtml">
<head th:replace="~{fragments/head}">
</head>
<body>
<div>
    <nav th:replace="~{fragments/navigation}"></nav>
</div>
<br>
<div class="container mt-3 text-center text-white my-bg pt-4">
    <h1>Welcome to GameShop,</h1>
    <th:block th:if="${loggedInUsername != null}">
        <p style="font-size: 24px" th:text="${loggedInUsername} + '!'"></p>
    </th:block>
    <th:block th:if="${loggedInUsername == null}">
        <p style="font-size: 24px">Anonymous !</p>
    </th:block>
    <th:block sec:authorize="hasRole('USER')">
        <h3 class=" pt-3">Click <a href="/games">here</a> to browse our latest PC games!</h3>
    </th:block>
    <h4 th:if="${confirmed == false}" class="mt-4">
        <h4 class="mb-3" style="color: #7c7c7c">or enter your email address below to confirm your profile.</h4>
        <div class="pt-3 pb-3" style="font-size: 18px ; color: #e86473">
            <strong>Note:</strong> Unconfirmed user profiles will be deleted after a certain time.
            Full functionality, such as ordering and reviewing games, requires email confirmation.
        </div>
        <form th:action="@{/enter-email}" method="post" th:object="${addEmailDTO}">
            <div class="row justify-content-center pt-2 pb-4">
                <div class="col-md-4">
                    <div class="input-group input-group-sm mb-3">
                        <label for="email" class="sr-only">Enter your email:</label>
                        <input type="email" class="form-control" id="email" name="email" placeholder="Enter your email" required>
                    </div>
                    <div th:if="${emailExists}" class="text-danger mb-2">
                        This email address is already taken.
                    </div>
                    <div th:if="${confirmed}" class="text-success">
                        You have successfully confirmed your email address!
                    </div>
                    <div class="text-center">
                        <button type="submit" class="btn btn-primary mt-1">Submit</button>
                    </div>
                </div>
            </div>
        </form>
    </h4>
    <th:block sec:authorize="!isAuthenticated()">
        <h3 class="pt-3">Click <a href="/games">here</a> to browse our latest PC games!</h3><br>
        <h4><a href="/register">Register</a> to view game details and place an order.</h4><br>
        <h5 class="pt-1 pb-2" style="color: grey">Already have an account? Log in <a href="/login">here</a>.</h5>
    </th:block>
    <th:block sec:authorize="hasRole('ADMIN')">
            <button class="btn btn-success mr-3" onclick="window.location.href='/games/add'">
                <h4>Add new game</h4>
            </button>
          <button class="btn btn-warning mr-3" onclick="window.location.href='/admin/add'">
            <h4>Add admin</h4>
            </button>
            <button class="btn btn-info " onclick="window.location.href='/orders'">
                <h4>See all orders</h4>
            </button>
    </th:block>
</div>
</body>
</html>
